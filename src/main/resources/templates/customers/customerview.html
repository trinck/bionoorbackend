<!DOCTYPE html>
<html  lang="en" data-bs-theme="light"  xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="index">
<head>
<meta charset="UTF-8">
<title>Customer's View</title>
<link rel="stylesheet" href="css/customers/customerview.css" type="text/css">
</head>
<body>

	
	 <div	style="width: 97%;"	class="container d-flex flex-column gap-3 pb-5" layout:fragment="content">


			<!-- start hearder commun with all pages -->
			<header class="d-flex border-bottom p-1">
				<h5 th:inline="text">customer #[[${customer.id}]] </h5>
				
				<div class="ms-auto">
					
					<button class=" bio-btn bio-btn-brown rounded-1" type="button" data-bs-toggle="modal" data-bs-target="#form-modal">Add discount</button>
				</div>
			</header>
	
			<!-- end hearder commun with all pages -->
		
		<!-- nav tab  -->
		
		<nav>
			<div class="nav nav-tabs" id="nav-tab" role="tablist">
				<button class="nav-link active" id="nav-details-tab" data-bs-toggle="tab" data-bs-target="#nav-details" type="button"
					role="tab" aria-controls="nav-home" aria-selected="true">Details</button>
				<button class="nav-link" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-invoices" type="button"
					role="tab" aria-controls="nav-profile" aria-selected="false">Invoices</button>
				<button class="nav-link" id="nav-contact-tab" data-bs-toggle="tab" data-bs-target="#nav-contact" type="button"
					role="tab" aria-controls="nav-contact" aria-selected="false">Contact</button>
				
			</div>
		</nav>
	
       <!-- end tab and start tab-content-->
		<div class="tab-content" id="nav-tabContent">
			<!--  section detail-->
			<section class="tab-pane fade show active container " id="nav-details" role="tabpanel" aria-labelledby="nav-home-tab" tabindex="0">
				
				
				<div class="row row-cols-3 gy-3 gap-3">
					<div class="card shadow-sm p-0">
						
						<div class="tab-col-head align-items-center gap-2    d-flex flex-column">
							<img class="rounded-circle w-50" src="images/_87da749f-59b8-40fb-b1bb-e3a19ff5e2b0.jpeg" >
							<div class="fw-semibold d-flex flex-column align-items-center">
								<span th:text="${customer.firstName}">firstName</span>
								<span th:text="${customer.lastName}">lastName</span>
							</div>
						</div>
						
						<div class="tab-col-body card-body p-0">
							<div class="tab-col-body-item ">
								<div class="kew">
									Email	
								</div>
								<div class="value ms-auto" >	
									<div th:text="${customer.email}">value</div>
									<div class="bio-bl-puce bio-bl-green fw-semibold" th:if="${customer.confirmed}" style="font-size: small;">Verified</div>
									<div  class="bio-bl-puce bio-bl-red fw-semibold" th:unless="${customer.confirmed}">Not Verified</div>
								</div>
							</div>
							
							<div class="tab-col-body-item ">
								<div class="kew">
									Phone	
								</div>
								<div class="value ms-auto" th:text="${customer.tel}">	
									Value
								</div>
							</div>
							
							<div class="tab-col-body-item ">
								<div class="kew">
									Country	
								</div>
								<div class="value ms-auto" th:text="${customer.address.city.country.name}">	
									Value
								</div>
							</div>
							
							<div class="tab-col-body-item ">
								<div class="kew">
									State/Region	
								</div>
								<div class="value ms-auto" th:text="${customer.address.city.name}">	
									Value
								</div>
							</div>
							
							<div class="tab-col-body-item ">
								<div class="kew">
									Street	
								</div>
								<div class="value ms-auto" th:text="${customer.address.street}">	
									Value
								</div>
							</div>
							
							<!-- action-->
							<div class="tab-col-body-item  ">
								<div class="kew">
									Code
								</div>
								<div class="value ms-auto" th:text="${customer.id}">	
									Value
								</div>
							</div>
							
						</div>
					</div>
					
					<!-- card 2-->
					<div class="card shadow-sm p-0 ">
						
						<div class="tab-col-head ">
							<span class="fw-semibold fs-6">
									Billing
							</span>
						</div>
						
						<div class="tab-col-body card-body p-0">
							<div class="tab-col-body-item ">
								<div class="kew">
									Paid	
								</div>
								<div class="value value ms-auto">	
									0
								</div>
							</div>
							
							<div class="tab-col-body-item ">
								<div class="kew">
									Unpaid	
								</div>
								<div class="value value ms-auto">	
									0
								</div>
							</div>
							
							<div class="tab-col-body-item ">
								<div class="kew">
									Payments	
								</div>
								<div class="value value ms-auto">	
									0
								</div>
							</div>
						</div>
					</div>
					
					<!-- card 3 send email-->
					
					<div class="card shadow-sm p-0">
						
						<div class="tab-col-head ">
							<span class="fw-semibold fs-6">
								Send Email
							</span>
						</div>
						
						<div class="tab-col-body card-body p-0">
							<div class="tab-col-body-item ">
								<div class="w-100">
									<div class="">
										<select class="form-select">
											<option>
												Resend last Invoice
											</option>
										
											<option>
												Send Verification Mail
											</option>
										
											<option>
												Send Reset Password
											</option>
										</select>
									</div>
									
									<div class="mt-3">
										<button class=" rounded-1 d-flex align-items-center gap-1 bio-btn-blue bio-btn " type="button" ><i class="bi bi-envelope"></i> Send Email</button>
									</div>
									
								</div>
								
							</div>
						</div>
					</div>
					
					<!-- card 4-->
					<div class="card shadow-sm p-0">
						
						<div class="tab-col-head ">
							<span class="fw-semibold fs-6">
								Others Actions
							</span>
						</div>
						
						<div class="tab-col-body card-body p-0">
							<div class="tab-col-body-action ">
								<i class="bi bi-slash-circle "></i>
								Close Account
							</div>
						</div>
					</div>
					
					
					
					<!-- card 5-->
					<div th:if="${#lists.size(customer.discountDCCs)>0}" class="card shadow-sm  p-0">
						
						<div class="tab-col-head ">
							<span class="fw-semibold fs-6">
								Discount Codes
							</span>
						</div>
						
						<div class="tab-col-body card-body  p-0">
							<div th:each="d:${customer.discountDCCs}" class="tab-col-body-item ">
								<div class="d-flex flex-column align-items-center bio-coupon justify-content-center shadow w-100">
									<span class="code" th:text="${d.code}"></span>
									<span class=" discount" th:text="'-'+ ${ d.type.name == 'AMOUNT'? '$'+d.discount: d.discount+ ' %' }"></span>
									<span style="font-size: small;">Apply to category hair</span>
									<span class="" th:inline="text">Until [[${#dates.format(d.endDate,'dd/MM/yyyy')}]]</span>
									<span class="ruban ruban-image shadow" > ruban</span>
								</div>
							</div>
						</div>
					</div>
					
					
				
				</div>
				
			</section>
			
			
			
			<!--  section invoices-->
			<section class="tab-pane fade container bg-white  shadow-sm" id="nav-invoices" role="tabpanel" aria-labelledby="nav-profile-tab" tabindex="0">
				<div class="card w-100">
				
					<div class="card-body ">
				
						<!-- table header -->
						<div class="bio-table-head d-flex  gap-2 my-3">
							
						</div>
						<!-- table header end -->
				
				
						<table class="table table-sm table-responsive  table-hover align-middle">
							<thead>
								<tr>
									<th>Id</th>
									<th>Due date</th>
									<th>Bill from</th>
									<th>Status order</th>
									<th>#Order No</th>
									<th>Status invoice</th>
									<th>Total amount</th>
									<th>Vat</th>
									<th>Edit</th>

								</tr>
							</thead>
							<tbody class="">
								<tr th:each="order:${customer.orders}" th:if="${order.invoice != null}" >
									
									<td th:text="${order.invoice.id}"> </td>
									<td><span class="badge text-bg-success " th:text="${#dates.format(order.invoice.dueDate, 'dd-MM-yyyy')}"></span></td>
									<td>candice armane</td>
									<td><span class="badge text-bg-secondary" th:text="${order.status}"></span></td>
									<td th:text="${order.id}"></td>
									<td> <span class="badge text-bg-danger"> Not paid</span></td>
									<td th:text="${#numbers.formatDecimal(order.invoice.totalAmount,1,2)}"></td>
									<td th:text="${order.invoice.vat}">20</td>
									<td>
										<div class="d-flex gap-3"><a class="" href="#"><i class="bi bi-pencil-fill text-secondary"></i></a> <a href="#"><i
													class="bi bi-x-lg text-danger"></i></a> <a th:href="@{/invoice(id=${order.invoice.id} )}"><i
													class="bi bi-arrow-right text-secondary"></i></a></div>
									</td>

								</tr>
				
				
							</tbody>
				
							<tfoot>
				
				
							</tfoot>
						</table>
				
				
						<!-- navigation -->
						<div class="section-nav d-flex gap-3 ">
				
							<nav aria-label="Page navigation">
								<ul class="pagination pagination-sm">
									<li class="page-item"><a class="page-link" href="#">Previous</a></li>
									<li class="page-item"><a class="page-link" href="#">1</a></li>
									<li class="page-item"><a class="page-link" href="#">2</a></li>
									<li class="page-item"><a class="page-link" href="#">3</a></li>
									<li class="page-item"><a class="page-link" href="#">Next</a></li>
								</ul>
							</nav>
							<div class="">
								<select class="form-select border-0  form-select-sm" id="pageNumber">
									<option>5</option>
									<option>10</option>
								</select>
				
							</div>
				
							<div>
								<span class="text-secondary">Total page: 14</span>
							</div>
						</div>
				
				
				
					</div>
				
				
				</div>
			</section>
			
			
			
			
			<!--  section !-->
			<section class="tab-pane fade  bg-white  shadow-sm" id="nav-disabled" role="tabpanel" aria-labelledby="nav-contact-tab" tabindex="0">
				!
			</section>
			
		</div>
		  <!-- end tab-content-->
		
		
		
		
		<!-- Modal for add discount-->
	    	<form action="" onsubmit="createDiscount(event)" method="post" class="modal fade" id="form-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog modal-dialog-centered">
					<div class="modal-content">
						<div class="modal-header">
							<h1 class="modal-title fs-5" id="form-modalLabel">Add discount code</h1>
							<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
						</div>
						<div class="modal-body" >
							<div class="row">
								<div class="col-6 d-flex flex-column gap-2">
									<input type="text" class="form-control" placeholder="code" name="code">
									<input type="number" min="0" class="form-control" placeholder="discount value" name="discount">
									<div class="d-flex gap-2">
										<input type="text" list="list-product" class="form-control" placeholder="product" id="input-product">
										<button type="button" class="bio-btn bio-btn-brown rounded-1" onclick="addProduct(event)"> add</button>
									</div>
									
									<div class="products-list row row-cols-3 w-100 gap-1  g-0" id="products">
										
									</div>
									
									
									<div class="d-flex gap-2">
										<input type="text" list="list-category" class="form-control" placeholder="category" id="input-category">
										<button type="button" class="bio-btn bio-btn-brown rounded-1" onclick="addCategory(event)"> add</button>
									</div>
									
									<div class="products-list row row-cols-3 w-100 g-0 gap-1" id="categories">
										
									</div>
									
								</div>
								
								<div class="col-6 d-flex flex-column gap-2">
									<input type="date" class="form-control" name="endDate" placeholder="end date">
									<input type="hidden" name="customerId" class="form-control" th:value="${customer.id}" id="customerId">

									<div class="form-check">
											<input class="form-check-input" value="true" checked type="checkbox" name="unique" id="unique">
											<label class="form-check-label" for="unique" >
												Unique
											</label>
									</div>
									
									<div class="form-check">
											<input class="form-check-input" value="true" checked type="checkbox" name="actif" id="actif">
											<label class="form-check-label" for="actif" >
												Enabled
											</label>
									</div>
									
									
									<div>
										<div class="form-check">
											<input class="form-check-input" value="amount" checked type="radio" name="type" id="amount">
											<label class="form-check-label" for="amount">
												Amount
											</label>
										</div>
										
										<div class="form-check">
											<input class="form-check-input" value="percentage" type="radio" name="type" id="percentage">
											<label class="form-check-label" for="percentage">
												Percentage
											</label>
										</div>
									</div>
								</div>
								
								
							</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="bio-btn bio-btn-secondary rounded-1" data-bs-dismiss="modal">Close</button>
							<button type="submit" class="bio-btn bio-btn-blue rounded-1" >Save</button>
						</div>
					</div>
				</div>
			</form>
	    <!-- end Modal for add discount-->	
	    
	    <!-- data list product-->	
	    <datalist  id="list-product">
			<option th:each="product: ${products}" th:text="${product.name}">
				
			</option>
		</datalist>
		
		
		 <!-- data list categories-->	
	    <datalist id="list-category">
			<option th:each="category: ${categories}" th:text="${category.name}">
			</option>
		</datalist>

  
	<script src="js/customers/customerview.js" type="text/javascript"></script>
	</div>
	

</body>
</html>